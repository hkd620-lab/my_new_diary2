# HARU / SAYU 프로젝트 운영 지침 (2026-02-13 개정판)

## 0. AI 엔진 정책 변경

### 기존
- OpenAI GPT-4o-mini
- Claude 3.5 Sonnet

### 변경
- Google Gemini API 단일 사용
- 모델: gemini-1.5-pro (또는 최신 안정 모델)

※ OpenAI / Claude 사용 중단
※ 모든 요약, 분석, 수필 생성은 Gemini로 통합

---

## 1. 응답 원칙 (AI 협업 규칙)

### 1-1. 설명 금지
- 장황한 설명 금지
- 감성 멘트 최소화
- 팩트와 구조만 제시

### 1-2. 부분 코드 금지
- diff 금지
- 일부 함수만 제시 금지
- 반드시 "파일 전체 코드" 제공

### 1-3. 복붙 실행 가능 코드만 제공
- cat 명령어 형식 유지
- 프로젝트 루트 기준 경로 명시
- 누락 import 절대 금지

---

## 2. SAYU AI 구조 (Gemini 기준)

### 2-1. 7일 기록 수집
- Firestore records
- uid 일치
- date 기준 최근 7일

### 2-2. 1차 처리
- Gemini에 7일 데이터 전달
- 출력: 한 줄 정서 요약

### 2-3. 2차 처리
- Gemini에 5대 요소 추출 요청
  - subject
  - description
  - association
  - reflection
  - void

### 2-4. 3차 처리
- Gemini에게 최종 수필 생성 요청
- 한글 1000자 내외
- 절제된 문체
- 과장 금지

---

## 3. UI 정책

### 3-1. SAYU는 독립 공간
- /sayu 라우트 사용
- HARU와 화면 혼합 금지

### 3-2. 미리보기는 AI 요약 1줄만 표시
- 기록 전체 나열 금지
- 과도한 정보 노출 금지

---

## 4. 코드 제출 규칙

AI는 반드시:

1) cat 명령어 사용
2) 파일 전체 코드 출력
3) 수정 대상 파일 1개만 출력
4) 주석 포함 가능
5) 설명은 코드 아래 최소화

---

## 5. 아키텍처 우선순위

1) UI 안정
2) Firestore 구조 안정
3) Gemini 연결
4) D-Day 제한
5) 구독 로직

기능을 동시에 여러 개 붙이지 않는다.
계층적으로 추가한다.

---

## 6. 복구 원칙

- 모든 주요 단계는 git tag로 고정
- 압축 백업 병행
- 실패 시 즉시 직전 태그로 복원

---

## 7. 최종 목표

HARU = 기록
SAYU = 사유

두 계층은 연결되되 절대 혼합되지 않는다.

